# 1.数据库内连接、左连接、右连接

## 内外链接的区别

内连接的语法：    
SELECT  XXX FROM XXX INNER JOIN XXX ON XXX;    
内连接指的是把表连接时表与表之间匹配的数据行查询出来，就是两张表之间数据行匹配时，要同时满足ON语句后面的条件才行。    
左连接和右连接，又叫左外连接和右外连接。   
我们来看一下左连接的语法    
SELECT XXX FROM XXX LEFT OUTER JOIN XXX ON XXX    
左连接的意思是，无论是否符合ON语句后面的表连接条件都会把左边那张表的记录全部查询出来，右边的那张表只匹配符合条件的数据行。右连接则与之相反（这里同样OUTER 可以省略）。    

## 左右链接的区别  
互为镜像  

# 2.假设有个百万数据级数据库，需要频繁插入数据同时，对于处理完成的数据，后续只需要查询，问怎么建表和优化

# 3.数据库优化了解那些

# 4.·索引相关（！！很重要）
https://blog.csdn.net/tongdanping/article/details/79878302  
## 原理     
MySQL数据库支持多种索引类型，如BTree索引，B+Tree索引，哈希索引，全文索引等等       
## 索引优缺点  
优势：可以快速检索，减少I/O次数，加快检索速度；根据索引分组和排序，可以加快分组和排序；    
劣势：索引本身也是表，因此会占用存储空间，一般来说，索引表占用的空间的数据表的1.5倍；索引表的维护和创建需要时间成本，这个成本随着数据量增大而增大；构建索引会降低数据表的修改操作（删除，添加，修改）的效率，因为在修改数据表的同时还需要修改索引表；     

## 索引设计优化策略   


## 常用索引类型   
常见的索引类型有：主键索引、唯一索引、普通索引、全文索引、组合索引    

## 索引生效场景   

## 建立索引，每条数据一个时间戳，问能不能以时间戳为索引


# 5.事务（！！很重要）
## 隔离级别
## 四个特性
事务是必须满足4个条件（ACID）：：原子性（Atomicity，或称不可分割性）、一致性（Consistency）、隔离性（Isolation，又称独立性）、持久（Durability）。　　

原子性：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。  

一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。  

隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。  

持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。  

## 不同隔离级别产生的问题（脏读幻读不可重复读）

read uncommitted  读未提交  
read committed      读以提交  
repeatable  read    可重复读  
serializable            串行化  
这四个隔离级别逐渐增高。  

① read uncommitted：事务A未提交的数据，事务B也可以读取到，这种隔离级别最低。这种事务会导致"dirty read(脏读)"。因为事务A的数据还没有提交，事务B就可以读取到，那如果事务A在事务B读取后回滚了呢，就导致了事务B读取到的数据是"脏数据"。  

② read committed：事务A未提交的数据，事务B读取不到，事务A提交后的数据事务B才能读取到。这个事务级别不会导致"dirty read"，但会导致"不可重复读"。假设事务A需要半天，在这期间有很多的其它事务都在修改数据，那么就导致了一个问题，事务A在开启时读到的数据与半天后读到的数据差别很大，那么事务A需要在这半天内读到的数据都是一样的该怎么办，比如每个月底网络运营商系统出账的时候，那肯定得在出账期间读到的数据都必须一样才行。  

③ repeatable  read：事务A提交后的数据，事务B读取不到，事务B读取的数据依旧是事务B刚开始时的数据。MySQL的事务默认是这个级别。  

④ serializable：事务A在执行的时候，事务B只能等待，就是说当多个事务需要执行时，只能排队一个个的来，就是串行化的字面意思了。这种隔离级别最高，但会导致数据库的吞吐量很低一般不用。  

　1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据  

　2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。     

　3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。   

　小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表   
 
事务隔离级别	               脏读	   不可重复读	   幻读  
读未提交（read-uncommitted）  是	       是	        是  
读已提交（read-committed）    否	       是	        是   
可重复读（repeatable-read）	否	       否	        是   
串行化（serializable）	     否	        否	         否  
    
# 6.存储过程 | 函数 | 触发器    
## 存储过程和函数的区别，如何选择使用    
    存储过程是用户定义的一系列sql语句的集合，涉及特定表或其它对象的任务，用户可以调用存储过程，而函数通常是数据库已定义的方法，它接收参数并返回某种类型的值并且不涉及特定用户表。  
1）一般来说，存储过程实现的功能要复杂一点，而函数实现的功能针对性比较强。  
2）函数只能返回一个变量；而存储过程可以返回多个。存储过程的参数可以有IN,OUT,INOUT三种类型，而函数只能有IN类。存储过程声明时不需要返回类型，而函数声明时需要描述返回类型，且函数体中必须包含一个有效的RETURN语句。  
3）存储过程一般是作为一个独立的部分来执行（ EXECUTE 语句执行），而函数可以作为sql语句的一个部分来调用。  

## 触发器分类     

## 存储引擎
https://www.cnblogs.com/liqiangchn/p/9066686.html
InnoDB存储引擎  

1️⃣、数据存储形式  
使用InnoDB时，会将数据表分为.frm 和 idb两个文件进行存储。  

2️⃣、锁的粒度  
InnoDB采用MVCC(多版本并发控制)来支持高并发，InnoDB实现了四个隔离级别，默认级别是REPETABLE READ，并通过间隙锁策略防止幻读的出现。它的锁粒度是行锁。【通过MVCC实现，MVCC在稍后会进行介绍】  

3️⃣、事务  
InnoDB是典型的事务型存储引擎，并且通过一些机制和工具，支持真正的热备份。    

4️⃣、数据的存储特点    
InnoDB表是基于聚簇索引(另一篇博客有介绍)建立的，聚簇索引对主键的查询有很高的性能，不过他的二级索引（非主键索引）必须包含主键列，索引其他的索引会很大。    

MyISAM存储引擎    
1️⃣、数据存储形式   
MyISAM采用的是索引与数据分离的形式，将数据保存在三个文件中.frm.MYD,.MYIs。   

2️⃣、锁的粒度   
MyISAM不支持行锁，所以读取时对表加上共享锁，在写入是对表加上排他锁。由于是对整张表加锁，相比InnoDB，在并发写入时效率很低。   

3️⃣、事务  
MyISAM不支持事务。  

4️⃣、数据的存储特点  
MyISAM是基于非聚簇索引进行存储的。  

5️⃣、其他   
MyISAM提供了大量的特性，包括全文索引，压缩，空间函数，延迟更新索引键等。   

进行压缩后的表是不能进行修改的，但是压缩表可以极大减少磁盘占用空间，因此也可以减少磁盘IO，从而提供查询性能。  
全文索引，是一种基于分词创建的索引，可以支持复杂的查询。  
延迟更新索引键，不会将更新的索引数据立即写入到磁盘，而是会写到内存中的缓冲区中，只有在清除缓冲区时候才会将对应的索引写入磁盘，这种方式大大提升了写入性能 。  

三、对比与选择
两种存储引擎各有各的有点，MyISAM专注性能，InnoDB专注事务。两者最大的区别就是InnoDB支持事务，和行锁。    
如何在两种存储引擎中进行选择？    
① 是否有事务操作？有，InnoDB。    
②是否存储并发修改？有，InnoDB。    
③是否追求快速查询，且数据修改较少？是，MyISAM。    
④是否使用全文索引？如果不引用第三方框架，可以选择MyISAM，但是可以选用第三方框架和InnDB效率会更高。    

# 7.关系数据库非关系数据库区别
